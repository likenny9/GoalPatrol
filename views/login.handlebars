<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Goal Patrol - Log In</title>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/bootstrap-theme.css" rel="stylesheet">
    <link href="css/GoalPatrol.css" rel="stylesheet">
    <script src="js/angular.1.2.26.min.js"></script>
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/GoalPatrolScript.js"></script>

    <script>
    $(function() {
        $('#login-form').submit(function(evt) {
            evt.preventDefault();

            var email = $('#username')[0].value;
            var password = $('#password')[0].value;
            var partnerEmail;
            var partnerPassword;
            var userNumber;

            if(email == "" || password == "") {
                alert('Empty email or password input.');
                return;
            }

            var combo = {
                "email" : email,
                "password" : password
            };
            combo = JSON.stringify(combo);
            $.ajax({
                url: "/authenticate",
                method: "POST",
                data: combo,
                contentType: "application/json",
                processdata: true
            }).done( function(info) {

                //Returns string if it's a redirection url, otherwise error object
                if(typeof info == 'string') {
                    window.location = '/';
                }
                else {                
                    alert(info.error);
                }
            });

        });

    });
 
    </script>

  </head>

  <body>

    <!-- Header: Title & Name -->
    <div class="header-container container" style="margin: -15px">
        <a href="/index"><h1 id="title">Goal Patrol</h1></a>
    </div>

    <br><!--Extra spacing-->

    <div class= "container">
      <h2>Welcome Back!</h2>

      <br>

      <form role="form" id="login-form">
        <div class="row">
            <div class="form-group">
                <input id="username" type="text" class="form-control input-lg" placeholder="Email">
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <input id="password" type="password" class="form-control input-lg" placeholder="Password">
            </div>
        </div>
      <br>

      <h2><button class="btn btn-info btn-block" type="submit">Log in</button></h2>
      </form>
    </div>

  </body>

</html>
